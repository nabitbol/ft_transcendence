version: "3"

services:
    postgres:
        image: postgres:12.3-alpine
        env_file:
          ./environnement/dev.env
        volumes:
          - postgres:/var/home/noam/Documents/web/todo.app/postgresql/data
        ports:
          - ${POSTGRES_ENV_PORT}:${POSTGRES_ENV_PORT}
        restart: always
  
    pgadmin:
        image: dpage/pgadmin4:6.11
        env_file:
          ./environnement/dev.env
        ports:
            - 15432:80
        volumes:
            - pgadmin:/var/home/noam/Documents/web/todo.app/pgadmin
        depends_on:
            - postgres

    backend:
        container_name: backend
        build:
          dockerfile: ./Dockerfile
          context: ./srcs/backend
        env_file:
          ./environnement/dev.env
        ports:
          - "${ENV_PORT}:${ENV_PORT}"

volumes:
    postgres:
    pgadmin:
